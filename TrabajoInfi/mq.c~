#include <mqueue.h>
#include <sys/stat.h>
#include <stdio.h>
#include <string.h>

#define tamMsg 100 //Tamaño de mesanjes para buffer

mq_t mqdes; //descriptor de cola de mensaje
char buf[tamMsg]; //buffer de dimension de caracteres tamMsg
int main(void)
{
  mqdes = mq_open("/ColaMsg", O_WRONLY | O_CREAT, 0664,NULL);//Creamos cola, si se crea nos manda un descriptor de cola, si se crea mal, el descriptor valdrá -1
  if (mqdes != -1){printf("La cola de mensajes se ha creado con éxito.\n");}
  else{    printf("No se ha creado la cola de mensajes adecuadamente.\n");}
  printf("Introduzca mensaje.\n");
  scanf("%s", buf);
  mq_send(mqdes, buf, strlen(buf) + 1, 0);
  mq_close(mqdes);
  
  return 0;
}
